<html lang="ja">

<head>
  <meta charset="utf-8">
  <link rel="icon" href="data:,">
  <title>Stereo Check シンプルサンプル</title>

  <style>
    button {
      margin: 15px 0;
      padding: 10px 20px;
      font-size: 16px;
    }

    .waveform-container {
      margin: 20px 0;
    }

    .info-section {
      margin: 10px 0;
    }

    .connection-info {
      margin: 10px 0;
      padding: 10px;
      background-color: #f8f9fa;
      border-radius: 5px;
      font-family: monospace;
      font-size: 14px;
      color: #495057;
    }

    .clients-layout {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }

    .client-container {
      border: 2px solid #ccc;
      padding: 20px;
      border-radius: 10px;
      flex: 1;
      min-width: 500px;
    }

    .client1 {
      border-color: #007bff;
    }

    .client2 {
      border-color: #28a745;
    }

    /* キャンバスサイズをコンテナに合わせて調整 */
    canvas {
      width: 100%;
      max-width: 600px;
      height: auto;
    }

    @media (max-width: 1200px) {
      .clients-layout {
        flex-direction: column;
      }

      .client-container {
        min-width: auto;
      }
    }
  </style>
</head>

<body>
  <h2>Stereo Check サンプル - 双方向通信</h2>

  <div class="clients-layout">
    <div class="client-container client1">
      <h2>Sendrecv Client 1</h2>
      <!-- 音声入力デバイス選択 -->
      <div>
        <label for="sendrecv1-audio-input">音声入力デバイス：</label>
        <select id="sendrecv1-audio-input"></select>
      </div>
      <div>
        <label>
          <input type="checkbox" id="forceStereoOutput1" name="forceStereoOutput1"> forceStereoOutput
        </label>
      </div>
      <button id="sendrecv1-connect">connect</button>
      <div id="sendrecv1-connection-id" class="connection-info"></div>
      <div id="sendrecv1-used-device" class="connection-info">使用中のデバイス: 未接続</div>

      <div class="waveform-container">
        <h3>送信音声の波形 (Client1 Sendrecv)</h3>
        <div class="info-section">
          <div id="local1-channels"></div>
          <div id="local1-difference-value"></div>
          <div id="local1-stereo"></div>
        </div>
        <canvas id="local1-waveform" width="600" height="200"></canvas>
      </div>

      <div class="waveform-container">
        <h3>受信音声の波形 (Client1 Sendrecv)</h3>
        <div class="info-section">
          <div id="remote1-difference-value"></div>
          <div id="remote1-stereo"></div>
        </div>
        <canvas id="remote1-waveform" width="600" height="200"></canvas>
      </div>

      <audio id="remote1-audio" controls autoplay muted></audio>
    </div>

    <div class="client-container client2">
      <h2>Sendrecv Client 2</h2>
      <!-- 音声入力デバイス選択 -->
      <div>
        <label for="sendrecv2-audio-input">音声入力デバイス：</label>
        <select id="sendrecv2-audio-input"></select>
      </div>
      <div>
        <label>
          <input type="checkbox" id="forceStereoOutput2" name="forceStereoOutput2"> forceStereoOutput
        </label>
      </div>
      <button id="sendrecv2-connect">connect</button>
      <div id="sendrecv2-connection-id" class="connection-info"></div>
      <div id="sendrecv2-used-device" class="connection-info">使用中のデバイス: 未接続</div>

      <div class="waveform-container">
        <h3>送信音声の波形 (Client2 Sendrecv)</h3>
        <div class="info-section">
          <div id="local2-channels"></div>
          <div id="local2-difference-value"></div>
          <div id="local2-stereo"></div>
        </div>
        <canvas id="local2-waveform" width="600" height="200"></canvas>
      </div>

      <div class="waveform-container">
        <h3>受信音声の波形 (Client2 Sendrecv)</h3>
        <div class="info-section">
          <div id="remote2-difference-value"></div>
          <div id="remote2-stereo"></div>
        </div>
        <canvas id="remote2-waveform" width="600" height="200"></canvas>
      </div>

      <audio id="remote2-audio" controls autoplay muted></audio>
    </div>
  </div>

  <script type="module" src="./main.ts"></script>
</body>

</html>